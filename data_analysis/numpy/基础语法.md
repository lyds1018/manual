# 📘 NumPy 常用语法

## 1. 创建数组

``` python
import numpy as np

# 从 Python 列表创建数组
arr = np.array(object=[1, 2, 3, 4], dtype=np.int32, copy=True)
# object: 输入数据 (list, tuple, 嵌套list等)
# dtype : 数据类型 (可选, 如 np.int32, np.float64)
# copy  : 是否复制数据 (默认 True)

# 全零数组
zeros = np.zeros(shape=(2, 3), dtype=np.float32, order='C')
# shape : 数组形状
# dtype : 数据类型 (默认 float64)
# order : 'C' 行优先, 'F' 列优先

# 全一数组
ones = np.ones(shape=(3, 2), dtype=np.int64)

# 指定值数组
full = np.full(shape=(2, 2), fill_value=7, dtype=np.int32)
# fill_value: 指定值

# 单位矩阵
eye = np.eye(N=3, M=None, k=0, dtype=float)
# N: 行数
# M: 列数 (默认等于N)
# k: 主对角线偏移量 (0表示主对角线, 正值表示上对角线)

# 等差数列
linspace = np.linspace(start=0, stop=1, num=5, endpoint=True, dtype=float)
# start-stop: 数列范围
# num       : 样本点数
# endpoint  : 是否包含 stop (True 默认包含)

# 等比数列
logspace = np.logspace(start=0, stop=10, num=50, endpoint=True，base=10.0, dtype=None)
# start-stop: 幂次范围
# num       : 样本点数
# endpoint  : 是否包含 stop (True 默认包含)
# base      : 公比

# 随机数组
rand = np.random.rand(2, 3)  # 参数是 shape
randint = np.random.randint(low=0, high=10, size=(3, 3))
```

------------------------------------------------------------------------

## 2. 数组属性

``` python
arr = np.array([[1, 2, 3], [4, 5, 6]])

arr.shape     # 形状 (行, 列)
arr.ndim      # 维度数
arr.size      # 元素总数
arr.dtype     # 数据类型
arr.itemsize  # 单个元素所占字节
```

------------------------------------------------------------------------

## 3. 数组操作

``` python
arr = np.arange(6)

# 变形
reshaped = arr.reshape(newshape=(2, 3), order='C')
# newshape : 新形状
# order    : 'C' 行优先, 'F' 列优先

# 转为一维
flattened = arr.flatten(order='C')

# 转置
transposed = arr.reshape(2, 3).T

# 拼接
concat = np.concatenate((arr.reshape(2, 3), arr.reshape(2, 3)), axis=0)
# axis : 0 行拼接, 1 列拼接

# 分割
split1 = np.split(ary=np.arange(6), indices_or_sections=3, axis=0)
split2 = np.split(ary=np.arange(6), indices_or_sections=[2, 4], axis=0)
# indices_or_sections : 分割份数/分割处索引列表
# axis : 0 行分割, 1 列分割
```

------------------------------------------------------------------------

## 4. 索引与切片

``` python
arr = np.arange(10)

arr[2:7:2]  # 切片: start=2, stop=7, step=2

mat = np.array([[1, 2], [3, 4], [5, 6]])

mat[0, 1]   		# (row=0, col=1) → 2
mat[[0,1],[1,1]]	# (row=[0,1], col=[1,1]) → [2,4]

rows = np.array([[0,1],[2,2]]) # row=[[0,1],[2,2]]
cols = np.array([[1,1],[0,1]]) # col=[[1,1],[0,1]]
mat[rows,cols]	               #  mat → [[2,4],[5,6]]

mat[1:2,0:1]	    # 1-2行，0-1列
mat[:, 0]   		# 所有行，0列
mat[...,1:]         # 所有行，1-末尾列

# 布尔索引
filtered = arr[arr > 5
```

------------------------------------------------------------------------

## 5. 数学运算

``` python
a = np.array([1, 2, 3], dtype=int)
b = np.array([4, 5, 6], dtype=int)

# 四则运算
np.add(a, b)
np.subtract(a, b)
np.multiply(a, b)
np.divide(a, b)

# 点积
np.dot(a, b)

# 求和
np.sum(a, axis=None)     # axis=None 全部元素, axis=0 列元素, axis=1 行元素
# 平均值
np.mean(a, axis=None)
# 最值
np.min(a, axis=None), np.max(a, axis=None)
# 最值索引
np.argmax(a, axis=None), np.argmin(a, axis=None)

# 标准差
np.std(a)	# ddof=0 总体(默认), ddof=1 样本
# 方差
np.var(a)

```

------------------------------------------------------------------------

## 6. 随机数

``` python
# 设置随机数生成器的种子
np.random.seed(seed=42)

np.random.rand(2, 3)  # 均匀分布 [0,1)
np.random.randn(2, 3) # 标准正态分布
np.random.randint(low=0, high=10, size=(2, 3))

np.random.choice(a=[1, 2, 3], size=5, replace=True, p=[0.2, 0.3, 0.5])
# a: 候选数组
# size: 形状
# replace: 是否可重复抽样
# p: 概率分布
```

------------------------------------------------------------------------

## 7. 线性代数

``` python
A = np.array([[1, 2], [3, 4]])

np.linalg.det(A)      # 行列式
np.linalg.inv(A)      # 逆矩阵
eigvals, eigvecs = np.linalg.eig(A)  # 特征值和特征向量
U, S, Vt = np.linalg.svd(A)          # 奇异值分解
```

------------------------------------------------------------------------

## 8. 保存与读取

``` python
# .npy文件
np.save(file='array.npy', arr=arr, allow_pickle=True)
arr_read = np.load(file='array.npy', allow_pickle=True)

# .txt文件
np.savetxt(fname='array.txt', X=arr, fmt='%d', delimiter=',')
arr_read = np.loadtxt(fname='array.txt', dtype=int, delimiter=',')
```
